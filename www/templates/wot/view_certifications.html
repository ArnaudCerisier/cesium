<ion-view view-title="Certifications" left-buttons="leftButtons">
  <ion-nav-buttons side="secondary">
    <button class="button button-icon button-clear icon ion-loop" ng-click="doUpdate()">
    </button>
  </ion-nav-buttons>

  <ion-content id="certifications">
    <div class="content scroll">

      <div class="hidden-xs hidden-sm padding" style="text-align:center">
        <button class="button button-raised icon-left ion-ribbon-b" ng-click="certifyIdentity()" ng-if="hasSelf">
          {{'WOT.BTN_CERTIFY' | translate}}
        </button>
      </div>


      <div class="row no-padding">
        <div class="col col-20 hidden-xs hidden-sm">&nbsp;
        </div>

        <label class="col center" ng-if="!loaded">
          <ion-spinner icon="android"></ion-spinner>
        </label>

        <div class="col list animate-fade-slide-in-right">


          <span class="item item-divider">
            <span translate="WOT.CERTIFICATIONS" translate-values="{uid: identity.uid}"></span>
            <div class="badge item-note" translate>WOT.EXPIRE_IN</div>
          </span>

          <span class="item" ng-if="!certifications || certifications.length == 0">
            <h3 translate>WOT.NO_CERTIFICATIONS</h3>
          </span>

          <a class="item ink"
                ng-repeat="cert in certifications"
                ng-if="loaded"
                ui-sref="app.view_identity({pub:cert.from})">
            <h3 ng-class="{'positive': !!cert.expiresIn && cert.expiresIn > timeWarningExpire, 'assertive': !!cert.expiresIn && cert.expiresIn <= timeWarningExpire}">
              <i class="icon " ng-class="{'ion-checkmark': !!cert.expiresIn && cert.expiresIn > timeWarningExpire, 'ion-alert-circled': !!cert.expiresIn && cert.expiresIn <= timeWarningExpire, 'ion-clock': !cert.expiresIn}"> </i>
              {{cert.uid}}
            </h3>
            <h4 class="gray">
              {{cert.from | formatPubkey}}
            </h4>
            <div class="badge item-note"
                 ng-class="{'badge-balanced': cert.expiresIn > timeWarningExpire, 'badge-assertive': cert.expiresIn <= timeWarningExpire}">
              {{cert.expiresIn | formatDuration}}
            </div >
          </a>

        </div>

        <div class="col col-20 hidden-xs hidden-sm">&nbsp;
        </div>
      </div>

      <div class="scroll-bar scroll-bar-v"></div>
    </div>
  </ion-content>

  <button class="button button-fab button-fab-bottom-right button-assertive icon ion-ribbon-b visible-xs visible-sm"
          ng-click="certifyIdentity()"
          ng-if="hasSelf">
  </button>
</ion-view>
