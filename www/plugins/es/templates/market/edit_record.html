<ion-view left-buttons="leftButtons" id="editMarket">
  <ion-nav-title>
    <span translate>MARKET.EDIT.TITLE</span>
  </ion-nav-title>

  <ion-nav-buttons side="secondary">
        <button class="button button-clear button-icon icon visible-xs visible-sm"
                ng-class="{'ion-android-send':!id, 'ion-android-done': id}"
                ng-click="save()">
        </button>
    </ion-nav-buttons>

    <ion-content scroll="true">
      <div class="row no-appding">

        <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>

        <div class="list col">

          <div class="gallery" >
            <div ng-repeat="picture in pictures"
                 class="item card card-gallery">
              <div>
                <h2 ng-if="picture.title">{{picture.title}}</h2>
                <img ng-src="{{picture.src}}" ></img>
              </div>
              <div class="item tabs tabs-secondary tabs-icon-left">
                <a class="tab-item stable-bg assertive-900" ng-click="removePicture($index)">
                  <i class="icon ion-close"></i>
                  {{'COMMON.BTN_PICTURE_DELETE'|translate}}
                </a>
                <a class="tab-item stable-bg"
                    ng-click="favoritePicture($index)"
                    ng-class="{'dark': $index !== 0, 'positive-900': $index === 0}">
                  <i class="icon ion-star"></i>
                  {{'COMMON.BTN_PICTURE_FAVORISE'|translate}}
                </a>
              </div>
            </div>
            <div class="item card card-gallery padding ink"
                 ng-click="selectNewPicture()">
              <i class="icon ion-image stable" style="font-size:150px"></i>
              <b class="icon ion-plus gray" style="font-size:80px; position:absolute; top:25px; right: 5px;"></b>
              <p translate>MARKET.EDIT.BTN_ADD_PICTURE</p>
            </div>
          </div>

          <input type="file" id="pictureFile" accept=".png,.jpeg,.jpg" onchange="angular.element(this).scope().fileChanged(event)"
                 style="visibility:hidden; position:absolute;"/>

          <span class="item item-icon-left" ng-if="id && formData.issuer">
              <i class="icon ion-key"></i>
              <span translate>MARKET.COMMON.ISSUER</span>
              <span class="badge">{{formData.issuer | formatPubkey}}</span>
          </span>

          <span class="item item-button-right" ng-click="openCategoryModal()">
              <span translate>MARKET.COMMON.CATEGORY</span>
              <span class="badge badge-royal">{{category.name}}</span>&nbsp;
              <i class="button button-clear ion-chevron-right"></i>
          </span>

          <div class="item item-input item-floating-label">
              <span class="input-label" translate>MARKET.EDIT.RECORD_TITLE</span>
              <input type="text" placeholder="{{'MARKET.EDIT.RECORD_TITLE_HELP'|translate}}" ng-model="formData.title">
          </div>

          <div class="item item-input item-floating-label">
              <span class="input-label" translate>MARKET.EDIT.RECORD_DESCRIPTION</span>
              <textarea placeholder="{{'MARKET.EDIT.RECORD_DESCRIPTION_HELP'|translate}}"
                        ng-model="formData.description"
                        rows="8" cols="10"></textarea>
          </div>

          <div class="item item-input item-floating-label">
            <span class="input-label" translate>MARKET.EDIT.RECORD_PRICE</span>
                <input type="text" placeholder="{{'MARKET.EDIT.RECORD_PRICE_HELP'|translate}}"
                          ng-model="formData.price">
          </div>

          <div class="item item-floating-label" ng-if="location.enable">
              <span class="input-label" translate>MARKET.EDIT.RECORD_LOCATION</span>
              <div class="item-input-inset">
                  <label class="item-input-wrapper">
                      <input type="text" placeholder="{{'MARKET.EDIT.RECORD_LOCATION_HELP'|translate}}" ng-model="formData.location">
                  </label>
                  <button class="button button-small button-positive" ng-click="localize()" ng-if="location.enable">
                      <i class="icon ion-pinpoint"></i>
                  </button>
              </div>
          </div>

          <div class="item item-input item-floating-label" ng-if="!location.enable">
              <span class="input-label" translate>MARKET.EDIT.RECORD_LOCATION</span>
              <textarea placeholder="{{'MARKET.EDIT.RECORD_LOCATION_HELP'|translate}}" ng-model="formData.location"></textarea>
          </div>


          <div class="padding hidden-xs hidden-sm text-right">
            <button class="button button-clear button-dark ink" ng-click="goBack()" type="button" translate>COMMON.BTN_CANCEL
            </button>
            <!--<button class="button button-small button-stable ink" ng-click="saveAsDirty()">-->
              <!--{{'MARKET.EDIT.BTN_SAVE' | translate}}-->
            <!--</button>-->
            <button class="button button-positive button-raised ink" ng-click="save()" ng-show="!id">
              {{'MARKET.EDIT.BTN_PUBLISH' | translate}}
            </button>
            <button class="button button-positive button-raised ink" ng-click="save()" ng-show="id">
              {{'MARKET.EDIT.BTN_SAVE' | translate}}
            </button>
          </div>
        </div>

        <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>

      </div>
    </div>
  </ion-content>


</ion-view>
