<ion-view left-buttons="leftButtons">
  <ion-nav-title>
    <span translate>MARKET.VIEW.TITLE</span>
  </ion-nav-title>

  <ion-nav-buttons side="secondary">
      <button class="button button-positive button-clear button-icon ion-android-create" ng-click="edit()" ng-if="canEdit">
      </button>
  </ion-nav-buttons>

  <ion-content class="viewRecord item-text-wrap">

      <div class="scroll">
        <div class="row no-padding">
          <div class="col-20 visible-lg">
          </div>
          <div class="col-10 visible-md">
          </div>

          <div class="col no-padding">
            <div class="list animate-fade-slide-in">

              <div class="item" ng-class="{'item-thumbnail-left': pictures && pictures.length>0}">
                  <img ng-src="{{pictures[0].src}}" nf-if="pictures && pictures.length>0">
                  <h1 ng-bind-html="formData.title"></h1>
                  <h2 class="gray">
                    <a ng-if="formData.location" ui-sref="app.market_lookup({location:formData.location})">
                      <i class="icon ion-location"></i>
                      <span ng-bind-html="formData.location"></span>
                    </a>
                    <span ng-if="formData.location && category.name">&nbsp;|&nbsp;</span>
                    <a class="ink" ng-if="category.name" ui-sref="app.market_lookup({category:category.id})">
                      <i class="icon ion-flag"></i>
                      {{category.name}}
                    </a>
                  </h2>

                  <h2 class="positive">
                    <a ui-sref="app.view_identity({pub:formData.issuer})">
                      <span ng-if="issuer.uid">
                        <i class="icon ion-person"></i>
                        {{issuer.uid}}
                      </span>
                      <span ng-if="!issuer.uid">
                        <i class="icon ion-key"></i>
                        {{issuer.pubkey|formatPubkey}}
                      </span>
                    </a>
                  </h2>

                <h4>
                  <span>
                    <i class="icon ion-clock" ng-if="formData.time"></i>
                    {{formData.time|formatFromNow}}
                    <span class="gray hidden-xs">|
                      <i class="icon ion-calendar"></i>
                      {{formData.time | formatDate}}
                    </span>
                  </span>
                </h4>
              </div>

              <div class="item" style="margin-top:10px">
                  <p ng-bind-html="formData.description"></p>
              </div>

              <span class="item item-icon-left item-button-right" >
                  <i class="icon ion-pricetag" ng-show="formData.price"></i>
                  <span class="dark">{{formData.price}}</span>
                  <button class="button button-raised button-calm ink-dark"
                          ng-click="transfer(formData.issuer, null, formData.price)">
                    {{'MARKET.COMMON.BTN_BUY' | translate}}
                  </button>
              </span>

              <div class="hidden-xs hidden-sm padding">

              </div>

              <div class="item-divider visible-xs visible-sm">&nbsp;</div>
            </div>

            <div class="list animate-fade-slide-in-right gallery" ng-if="pictures && pictures.length>0" >
              <div ng-repeat="picture in pictures"
                   class="item card card-gallery">
                <div class="ink">
                  <h2 ng-if="picture.title">{{::picture.title}}</h2>
                  <img ng-src="{{::picture.src}}" ></img>
                </div>
              </div>
            </div>
          </div>

          <div class="col-20 visible-lg">
          </div>
          <div class="col-10 visible-md">
          </div>
        </div>
      </div>


      <div class="scroll-bar scroll-bar-v"></div>
    </div>
  </ion-content>
</ion-view>
